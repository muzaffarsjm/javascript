<!DOCTYPE html>
<html>
  <head>
    <title>
      Re React
    </title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
      <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

      <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>
    
    <div class="demo-01"></div>

    <script type = 'text/babel'>
    //jsx elements
    let paragraph = <p>text</p>
    let button = <button>text</button>
      function PartOne() { 
        return(
          <>
            <input placeholder = 'type here'></input>
            <button>send</button>
          </>
        );
      };

      function ChatMessage(props) { 
        //props of react is actually an object
        const message = props.message;
        const sender = props.sender;
        /*
        if (sender === 'bot'){
          return(
            <div>
              <button>chatbot</button>
              {message}
            </div>
          ); 
        };
        */
        return(
          <div>
            {sender === 'bot' && <button>chatbot</button>}

            {message}

            {sender === 'user' && <button>user</button>}
            
          </div>
        );
      };

      function ChatMessages(){
        const array = React.useState([{
          message : "Hiii! How may I help you?",
          sender : 'bot',
          id : 'id1'
        },{
          message : "How are you today?",
          sender : 'user',
          id : 'id2'
        },{
          message : "Thanks. I am always good!",
          sender : 'bot',
          id : 'id3'
        }]
      );
      //first array holds pre-existing values  
      const chatMessages = array[0];
      //added values with event-handling.updater function
      const setChatMessages = array[1];
        function sendHi(){
          setChatMessages([
            //spread operator
            ...chatMessages, 
            { message : 'Can I help you?',
              sender: 'bot',
              id : crypto.randomUUID()}
          ]);
          /*
          chatMessages.push({
            message : 'Can I help you?',
            sender: 'robot',
            id : crypto.randomUUID()
          });
          console.log(chatMessages);
          */
        };
        return(
          <>
          <button onClick = {sendHi}>Send message</button>

           {chatMessages.map((chatMessage) =>{
            return (
            <ChatMessage 
              message = {chatMessage.message}
              sender = {chatMessage.sender}
              key = {chatMessage.id}
            />
            );
          })}  
          </> 
        )  
      };
      function App(){
        return (
          <>
            <PartOne />
            <ChatMessages />
          </>);
      };
      
    let firstTest = document.querySelector('.demo-01');
    let component1 = ReactDOM.createRoot(firstTest);
    component1.render(< App />);

    </script>
  </body>
</html>
<!DOCTYPE html>
<html>
  <head>
    <title>
    React 3.0
  </title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
      <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

      <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  
  <body>
    
    <h1>lesson 3</h1>
    <div class="js-main">

    <script type = 'text/babel'>

      function ChatTop(){
        return(
          <>
            <p>Welcome to the Chatbot</p>
            <p>test</p>
          </>
        );
      };
      
      function ChatMessages({message, sender}){
        return(
          <div>
            
            {sender === 'robot' && <button>robot</button>}

            {message}

            {sender === 'user' && <button>user</button> }
          </div>
        );
      };
      
      function ChatMessage(){
        const array = React.useState([
          {
            message : 'Hello',
            sender : 'robot',
            key : 'id01'
          }, {
            message : 'Hiii',
            sender : 'user',
            key : 'id02'
          }, {
            sender : 'robot',
            message : 'How may I help you?',
            key : 'id03'
          }
        ]);
    
        const chatMessages = array[0];
        const setChatMessages = array[1];

          function sendMessage(){
           setChatMessages([
            ...chatMessages, 
            {
              message : 'test',
              sender : 'user',
              id : crypto.randomUUID()
            }
           ]);
          };

        return (
          <>
          <button onClick = {sendMessage}>send message</button>


            {chatMessages.map((chatMessage) => {
              return(
                <ChatMessages 
                  message = {chatMessage.message}
                  sender = {chatMessage.sender}
                  key = {chatMessage.key}
                />
              );
                })}
          </>
          );
      };
      

      function App(){
        return(
          <>
            <ChatTop />
            <ChatMessage />
          </>
        );
      };
     const container = document.querySelector('.js-main');
     const reactRoot = ReactDOM.createRoot(container); 
     reactRoot.render(<App />);
    </script>
  </body>
</html>